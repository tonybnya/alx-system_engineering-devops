#!/usr/bin/env bash
# Configures a new ubuntu machine by installing
# Nginx where it should be listening on port 80
# Serve a page that would return a Hello World string
#

# Install nginx
apt-get update
apt-get -y install nginx

# Configure firewall to allow traffic on port 80
ufw allow 'Nginx HTTP'

# Create index.html file with Hello World!
echo "Hello World!" > /var/www/html/index.html

# Configure nginx to listen on port 80 and serve the index.html file
echo "server {
        listen 80 default_server;
        listen [::]:80 default_server;
        root /var/www/html;
        index index.html;
        server_name _;
}" > /etc/nginx/sites-available/default

# Restart nginx
service nginx restart

